{"version":3,"file":"static/js/544.f7ca47c3.chunk.js","mappings":"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","sources":["pages/Home/Home.jsx"],"sourcesContent":["import { getTrending, STATUS } from 'serviceAPI/fetch';\nimport MovieList from 'components/MovieList/MovieList';\nimport { GoUp } from 'pages/Movies/Movies.styled';\nimport { HiArrowUp } from 'react-icons/hi';\nimport { useState, useEffect } from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { scrollPos, scrollTop, infiniteHeight, boxScroll } from 'utils/scroll';\n\nconst Home = () => {\n  const [status, setStatus] = useState(STATUS.idle);\n  const [movies, setMovies] = useState([\n    {\n      id: 0,\n      poster_path: null,\n      title: '',\n      original_title: '',\n      release_date: '',\n      vote_average: 0,\n      vote_count: 0,\n    },\n  ]);\n  const [pages, setPages] = useState(2);\n  const [error, setError] = useState(null);\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    setStatus(STATUS.pending);\n    localStorage.setItem('scrollPos', 0);\n    async function fetchData() {\n      try {\n        getTrending(1).then(info => {\n          setMovies(info.results);\n        });\n        setStatus(STATUS.resolved);\n      } catch (error) {\n        setError(error);\n        setStatus(STATUS.rejected);\n      }\n    }\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const arrayOfMovies = await getTrending(pages).then(r => r.results);\n        setMovies(i => [...i, ...arrayOfMovies]);\n      } catch (error) {\n        setError(error);\n      }\n    }\n    fetchData();\n  }, [pages]);\n\n  const fetchMoreData = () => {\n    setPages(i => i + 1);\n  };\n\n  const reachTheEnd = () => {\n    if (movies.length !== 0) {\n      getTrending(pages).then(info => {\n        if (movies.length === info.total_results) {\n          setHasMore(false);\n        }\n      });\n    }\n  };\n  reachTheEnd();\n\n  return (\n    <>\n      {status === STATUS.resolved && (\n        <>\n          <h1 style={{ fontSize: '20px' }}>Trending today</h1>\n          <InfiniteScroll\n            dataLength={movies.length}\n            next={fetchMoreData}\n            initialScrollY={JSON.parse(\n              window.localStorage.getItem('scrollPos')\n            )}\n            height={infiniteHeight()}\n            hasMore={hasMore}\n            loader={<h4 style={{ textAlign: 'center' }}>Loading...</h4>}\n            endMessage={\n              <p style={{ textAlign: 'center' }}>\n                <b>Yay! You have seen it all ;D</b>\n              </p>\n            }\n          >\n            <MovieList movies={movies} onClick={() => scrollPos(boxScroll())} />\n          </InfiniteScroll>\n          {boxScroll() > 1000 && (\n            <GoUp onClick={() => scrollTop()}>\n              UP <HiArrowUp size={24} />\n            </GoUp>\n          )}\n        </>\n      )}\n      {status === STATUS.rejected && (\n        <h3>Something went wrong on API... The messege error `{error}`</h3>\n      )}\n      {status === STATUS.pending && (\n        <h3>Please wait, information is loading...</h3>\n      )}\n    </>\n  );\n};\n\nexport default Home;\n"],"names":["_useState","useState","STATUS","idle","_useState2","_slicedToArray","status","setStatus","_useState3","id","poster_path","title","original_title","release_date","vote_average","vote_count","_useState4","movies","setMovies","_useState5","_useState6","pages","setPages","_useState7","_useState8","error","setError","_useState9","_useState10","hasMore","setHasMore","useEffect","_fetchData","_asyncToGenerator","_regeneratorRuntime","_callee","_context","prev","next","getTrending","then","info","results","resolved","rejected","stop","apply","arguments","pending","localStorage","setItem","fetchData","_fetchData2","_callee2","arrayOfMovies","_context2","r","sent","i","concat","_toConsumableArray","t0","length","total_results","_jsxs","_Fragment","children","_jsx","style","fontSize","InfiniteScroll","dataLength","initialScrollY","JSON","parse","window","getItem","height","infiniteHeight","loader","textAlign","endMessage","MovieList","onClick","scrollPos","boxScroll","GoUp","scrollTop","HiArrowUp","size"],"sourceRoot":""}